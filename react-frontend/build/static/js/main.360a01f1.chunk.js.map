{"version":3,"sources":["reducers/reducer.js","components/header.js","components/receivedVideo.js","components/localVideo.js","components/canvas.js","logic/canvas.js","logic/helpers.js","logic/askStreams.js","logic/socket.js","logic/webrtc.js","logic/dataChannel.js","components/toolbar.js","components/callButtons.js","components/videoContainer.js","App.js","components/joinRoom.js","components/Root.js","serviceWorker.js","index.js","assets/avatar/man.svg","assets/icons/001-conference.svg","assets/icons/010-mail.svg","assets/icons/013-videocall-1.svg","assets/icons/024-megaphone.svg","assets/icon2/share-screen.svg","assets/icon2/blackboard.svg","assets/icon2/close-call.svg"],"names":["initialState","socket","room","reducer","state","arguments","length","undefined","action","console","log","type","Object","objectSpread","Header","react_default","a","createElement","id","src","avatar","alt","Component","ReceivedVideo","autoPlay","LocalVideo","muted","Canvas","isDrawing","lastX","lastY","ctx","document","getElementById","getContext","video","canvas","width","clientWidth","height","clientHeight","addEventListener","e","beginPath","moveTo","lineTo","offsetX","offsetY","strokeStyle","stroke","window","handleCanvas","text","date","Date","toLocaleTimeString","askCanvasStream","fillStyle","fillRect","canvasStream","captureStream","getTracks","updateTracksInConnection","_callee","hasAddTrack","stream","_args","regenerator_default","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","audio","sent","srcObject","forEach","track","myPeerConnection","addTrack","addStream","t0","handleGetUserMediaError","stop","this","askScreenStream","_askScreenStream","apply","_callee2","_context2","getDisplayMedia","_callee3","newVideoTrack","senders","senderToRemove","_context3","getSenders","filter","el","kind","label","includes","removeTrack","io","connect","on","error","msg","createPeerConnection","_askCameraStream","askCameraStream","sdp","_x2","_handleVideoOfferMsg","handleVideoOfferMsg","desc","RTCSessionDescription","setRemoteDescription","catch","reportError","handleVideoAnswerMsg","candidate","RTCIceCandidate","JSON","stringify","addIceCandidate","handleNewICECandidateMsg","tracks","RTCPeerConnection","iceServers","urls","username","credential","onnegotiationneeded","handleNegotiationNeededEvent","onicecandidate","handleICECandidateEvent","onnremovestream","handleRemoveStreamEvent","oniceconnectionstatechange","handleICEConnectionStateChangeEvent","onicegatheringstatechange","handleICEGatheringStateChangeEvent","onsignalingstatechange","handleSignalingStateChangeEvent","ontrack","handleTrackEvent","onaddstream","handleAddStreamEvent","_x","_handleNegotiationNeededEvent","offer","_negotiating","abrupt","createOffer","setLocalDescription","emit","localDescription","finish","event","streams","closeVideoCall","iceConnectionState","signalingState","iceGatheringState","remoteVideo","localVideo","onremovestream","onnicecandidate","onnotificationneeded","close","newDesc","answer","createAnswer","name","alert","message","errMessage","log_error","selectFile","click","sendFileToPeer","fileToSend","files","dataChannel","createDataChannel","onopen","handleSendChannelOpen","onclose","handleSendChannelClose","Toolbar","onChange","style","display","className","icon1","onClick","icon2","icon3","icon4","CallButtons","shareScreenIcon","blackboardIcon","closeCallIcon","VideoContainer","receivedVideo","components_localVideo","components_canvas","components_toolbar","components_callButtons","App","components_header","components_videoContainer","dispatch","JoinRoom","readInputField","value","placeholder","required","Link","to","updateSocketInStore","updateRoomNameInStore","Root","_ref","store","es","BrowserRouter","Route","exact","path","component","Boolean","location","hostname","match","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","components_Root","serviceWorker","ready","then","registration","unregister","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.360a01f1.chunk.js","sourcesContent":["const initialState = {\n  socket: null,\n  room: null,\n}\n\nconst reducer = (state = initialState, action) => {\n  console.log('state', state);\n  console.log('action', action);\n  switch (action.type) {\n    case 'SOCKET':\n      return { ...state, socket: action.socket }\n    case 'ROOM':\n      return { ...state, room: action.room }\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import React, { Component } from 'react';\nimport avatar from '../assets/avatar/man.svg';\nimport '../styles/header.css';\n\nclass Header extends Component {\n  render() {\n    return (\n      <div id=\"header\">\n        <h1>PeerPong</h1>\n        <div>\n          <p id=\"username\">Alan Turing</p>\n          <img id=\"avatar\" src={avatar} alt=\"avatar\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Header;\n\n","import React, { Component } from 'react';\n\nclass ReceivedVideo extends Component {\n  render() {\n    return (\n      <div id=\"received-content\">\n        <video id=\"received-video\" autoPlay></video>\n      </div>\n    );\n  }\n}\n\nexport default ReceivedVideo;\n\n","import React, { Component } from 'react';\n\nclass LocalVideo extends Component {\n  render() {\n    return (\n      <div id=\"local-content\">\n        <video id=\"local-video\" autoPlay muted></video>\n      </div>\n    );\n  }\n}\n\nexport default LocalVideo;\n\n","import React, { Component } from 'react';\nimport { handleCanvas } from '../logic/canvas';\nimport '../styles/canvas.css';\n\nclass Canvas extends Component {\n  componentDidMount() {\n    handleCanvas();\n  }\n\n  render() {\n    return (\n      <div id=\"canvas-content\">\n        <canvas id=\"canvas\"></canvas>\n      </div>\n    );\n  }\n}\n\nexport default Canvas;\n\n","export function handleCanvas() {\n  let isDrawing = false;\n  let lastX = 0;\n  let lastY = 0;\n  \n  //if mouse is not down don't do anything\n  //if mouse is down draw \n  function draw(e) {\n    console.log('in drawing');\n    let ctx = document.getElementById(\"canvas\").getContext(\"2d\");\n    if (!isDrawing) return;\n    ctx.beginPath();\n    ctx.moveTo(lastX, lastY);\n    ctx.lineTo(e.offsetX, e.offsetY);\n    ctx.strokeStyle = '#ecf0f1';\n    ctx.stroke();\n    lastX = e.offsetX;\n    lastY = e.offsetY;\n  }\n  \n  function onMouseDown(e) {\n    isDrawing = true;\n    lastX = e.offsetX;\n    lastY = e.offsetY;\n    console.log('coords', lastX, ' | ', lastY);\n  }\n  \n  //if (window.location.path !== '/videochat') return;\n  let ctx = document.getElementById(\"canvas\").getContext('2d');\n  let video = document.getElementById(\"received-video\");\n  \n  ctx.canvas.width = video.clientWidth;\n  ctx.canvas.height = video.clientHeight;\n  \n  //invoke draw function when user is moving mouse on top of the canvas\n  ctx.canvas.addEventListener('mousemove', draw);\n  //set isDrawing variable\n  ctx.canvas.addEventListener('mousedown', onMouseDown);\n  ctx.canvas.addEventListener('mouseup', () => isDrawing = false);\n  ctx.canvas.addEventListener('mouseout', () => isDrawing = false);\n\n  window.addEventListener('resize', () => {\n    let ctx = document.getElementById(\"canvas\").getContext('2d');\n    let video = document.getElementById(\"received-video\");\n\n    ctx.canvas.width = video.clientWidth;\n    ctx.canvas.height = video.clientHeight;\n  });\n}\n\n              /* export function handleCanvas() {\n              \n                let isDrawing = false;\n                let lastX = 0;\n                let lastY = 0;\n              \n                //if mouse is not down don't do anything\n                //if mouse is down draw\n                function draw(e) {\n                  console.log('in drawing');\n                  let ctx = document.getElementById(\"canvas\").getContext(\"2d\");\n                  if (!isDrawing) return;\n                  ctx.beginPath();\n                  ctx.moveTo(lastX, lastY);\n                  ctx.lineTo(e.offsetX, e.offsetY);\n                  ctx.strokeStyle = '#ecf0f1';\n                  ctx.stroke();\n                  lastX = e.offsetX;\n                  lastY = e.offsetY;\n                }\n              \n                function onMouseDown(e) {\n                  isDrawing = true;\n                  lastX = e.offsetX;\n                  lastY = e.offsetY;\n                  console.log('coords', lastX, ' | ', lastY);\n                }\n              \n                //set canvas size dinamically to the same width and length\n                //of the received video when user resizes a page and at the very beginning\n                window.addEventListener('resize', () => {\n                  let ctx = document.getElementById(\"canvas\").getContext('2d');\n                  let video = document.getElementById(\"received-video\");\n              \n                  ctx.canvas.width = video.clientWidth;\n                  ctx.canvas.height = video.clientHeight;\n                });\n              \n                window.onload = () => {\n                  if (window.location.path !== '/videochat') return;\n                  let ctx = document.getElementById(\"canvas\").getContext('2d');\n                  let video = document.getElementById(\"received-video\");\n              \n                  ctx.canvas.width = video.clientWidth;\n                  ctx.canvas.height = video.clientHeight;\n              \n                  //invoke draw function when user is moving mouse on top of the canvas\n                  ctx.canvas.addEventListener('mousemove', draw);\n                  //set isDrawing variable\n                  ctx.canvas.addEventListener('mousedown', onMouseDown);\n                  ctx.canvas.addEventListener('mouseup', () => isDrawing = false);\n                  ctx.canvas.addEventListener('mouseout', () => isDrawing = false);\n                };\n              \n              } */","const log = (text) => {\n  let date = new Date;\n  console.log('------------------------------------');\n  console.log(\"[\" + date.toLocaleTimeString() + \"] \" + text);\n}\n\nexport default log;","import log from './helpers';\nimport { myPeerConnection, hasAddTrack, handleGetUserMediaError } from './webrtc';\n\n//capture stream from canvas\nexport function askCanvasStream() {\n  //transform canvas from transparent to colored\n  let ctx = document.getElementById(\"canvas\").getContext(\"2d\");\n\n  ctx.fillStyle = '#2c3e50';\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n  log(\"Starting to read stream from canvas\");\n  let canvasStream = ctx.canvas.captureStream(25);\n  console.log('canvas stream tracks', canvasStream.getTracks());\n\n  let newTrack = canvasStream.getTracks()[0];\n  updateTracksInConnection(newTrack);\n}\n\n//capture camera and mic stream\nexport async function askCameraStream(hasAddTrack = true) {\n  try {\n    //if canvas is enabled, disable it first\n\n    log(\"Requesting webcam access...\");\n\n    let stream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: { width: 612, height: 288 }       //16:9 ???\n    });\n\n    log(\"-- Local camera stream obtained\");\n    document.getElementById(\"local-video\").srcObject = stream;\n\n    if (hasAddTrack) {\n      log(\"-- Adding tracks to the RTCPeerConnection\");\n      stream.getTracks().forEach(track => {\n        log('im a track');\n        myPeerConnection.addTrack(track, stream)\n      });\n    } else {\n      log(\"-- Adding stream to the RTCPeerConnection\");\n      myPeerConnection.addStream(stream);\n    }\n  } catch (err) {\n    handleGetUserMediaError(err);\n  }\n}\n\n//capture screen stream\nexport async function askScreenStream() {\n  try {\n    //if canvas is enabled, disable it first\n\n    log(\"Requesting screen access...\");\n\n    let stream = await navigator.getDisplayMedia({ video: true });\n    log(\"-- Local video screen stream obtained\");\n    document.getElementById(\"local-video\").srcObject = stream;\n\n    let newVideoTrack = stream.getTracks()[0];\n    updateTracksInConnection(newVideoTrack);\n  } catch (err) {\n    handleGetUserMediaError(err);\n  };\n}\n\n//updates peer connection adding new video track\n//and removing old video track\n//it needs to know which was the previous video track\n//because removing a track does not update the result of .getSenders()\nasync function updateTracksInConnection(newVideoTrack) {\n  if (hasAddTrack) {\n    log(\"-- adding new Screen video track to the RTCPeerConnection\");\n\n    await myPeerConnection.addTrack(newVideoTrack); //mediaStreamTrack object\n    //removeTrack function wants an RTCRtpSender\n    let senders = myPeerConnection.getSenders();\n    console.log('rtc senders', senders);\n    let senderToRemove = senders.filter(el => el.track.kind === 'video' && !el.track.label.includes('screen'))[0];\n    console.log('sender to remove', senderToRemove);\n\n    log(\"-- removing old video track in the RTCPeerConnection\");\n    await myPeerConnection.removeTrack(senderToRemove); //RTCRtpSender object\n  }\n}","import io from 'socket.io-client';\nimport { createPeerConnection, handleVideoOfferMsg, handleVideoAnswerMsg, handleNewICECandidateMsg } from './webrtc';\nimport { askCameraStream } from './askStreams';\nimport log from './helpers';\n\n//const hostname = window.location.hostname; //change it back to window.location.hosti\nconst socket = io.connect(`wss://codeworks-solo-project.herokuapp.com/`);\n\nsocket.on('connect', () => {\n  log('socket opened...');\n});\n\nsocket.on('connect_error', (error) => {\n  log('Connection error to socket.io server...');\n});\n\nsocket.on('join-room', (msg) => {\n  switch (msg) {\n    case 'waiting-for-other-person':\n      log(msg);\n      break;\n    case 'ready-for-videocall':\n      log(msg);\n      createPeerConnection(true);\n      askCameraStream();\n      break;\n    case 'too-many-people':\n      log(msg);\n      break;\n    default:\n      log('error of some sort with the rooms');\n  }\n});\n\nsocket.on('video-offer', (sdp) => {\n  log('i received an offer for videochat');\n  handleVideoOfferMsg(sdp);\n});\n\nsocket.on('video-answer', (sdp) => {\n  log('i received an answer for videochat');\n  handleVideoAnswerMsg(sdp);\n});\n\nsocket.on('new-ice-candidate', (sdp) => {\n  log('i received a new ice candidate remotelily from other peer');\n  handleNewICECandidateMsg(sdp);\n});\n\n\nexport default socket;\n\n\n\n","import socket from './socket';\nimport { askCameraStream } from './askStreams';\nimport log from './helpers';\n\nexport let myPeerConnection = null;\nexport let hasAddTrack = false;\nlet tracks = 0;\n\nexport function handleJoinRoomButton() {\n  let roomName = document.getElementById('room').value;\n  //socket.emit('join-room', roomName);\n}\n\n/* function createDataChannel(myPeerConnection) {\n  log('Creating data channel...');\n\n  let dataChannel = myPeerConnection.createDataChannel('luca');\n  dataChannel.onopen = (event) => {\n    console.log('data channel on open');\n  }\n  dataChannel.onclose = (event) => {\n    console.log('data channel on close');\n  }\n  dataChannel.onmessage = (event) => {\n    console.log('data channel on message');\n    console.log('HO LETTO' + event.data);\n  }\n} */\n\nexport function createPeerConnection() {\n  log(\"Setting up a connection...\");\n\n  myPeerConnection = new RTCPeerConnection({\n    iceServers: [\n      { urls: 'stun.voipzoom.com:3478' },\n      { urls: 'stun:stun.l.google.com:19302' },\n      {\n        urls: 'turn:numb.viagenie.ca',\n        username: 'webrtc@live.com',\n        credential: 'muazkh'\n      }\n    ]\n  });\n\n  hasAddTrack = (myPeerConnection.addTrack !== undefined);\n\n  myPeerConnection.onnegotiationneeded = handleNegotiationNeededEvent;\n  myPeerConnection.onicecandidate = handleICECandidateEvent;\n  myPeerConnection.onnremovestream = handleRemoveStreamEvent;\n  myPeerConnection.oniceconnectionstatechange = handleICEConnectionStateChangeEvent;\n  myPeerConnection.onicegatheringstatechange = handleICEGatheringStateChangeEvent;\n  myPeerConnection.onsignalingstatechange = handleSignalingStateChangeEvent;\n\n  //data channel event handlers\n  //myPeerConnection.ondatachannel = handleReceiveDataChannel;\n\n  if (hasAddTrack) {\n    myPeerConnection.ontrack = handleTrackEvent;\n  } else {\n    myPeerConnection.onaddstream = handleAddStreamEvent;\n  }\n}\n\nexport function log_error(text) {\n  let date = new Date;\n  console.error(\"[\" + date.toLocaleTimeString() + \"] \" + text);\n}\n\nexport async function handleNegotiationNeededEvent(e) {\n  if (myPeerConnection._negotiating == true) return;\n  log(\"*** Negotiation needed\");\n  myPeerConnection._negotiating = true;\n  try {\n    log(\"---> Creating offer\");\n    const offer = await myPeerConnection.createOffer();\n    console.log('im the offer', offer)\n\n    log(\"---> Creating new description object to send to remote peer\");\n    await myPeerConnection.setLocalDescription(offer);\n\n    log(\"---> Sending offer to remote peer\");\n\n    //send a video offer to the other peer along with SDP\n    socket.emit('video-offer', myPeerConnection.localDescription);\n    console.log('in negotiation needed myPeerConnection.localDescription', myPeerConnection.localDescription);\n  } catch (e) {\n    reportError(e)\n  } finally {\n    myPeerConnection._negotiating = false;\n  }\n}\n\nexport function handleTrackEvent(event) {\n\n  log(\"*** Track event\");\n  tracks++;\n  console.log(\"NUMBER OF TRACKS IS \", tracks);\n  document.getElementById(\"received-video\").srcObject = event.streams[0];\n}\n\nexport function handleAddStreamEvent(event) {\n  log(\"*** Stream added\");\n  document.getElementById(\"received-video\").srcObject = event.stream;\n}\n\nexport function handleRemoveStreamEvent(event) {\n  log(\"*** Stream removed\");\n  closeVideoCall();\n}\n\nexport function handleICECandidateEvent(event) {\n  if (event.candidate) {\n    log(\"Outgoing ICE candidate: \" + event.candidate.candidate);\n    socket.emit('new-ice-candidate', event.candidate);\n  }\n}\n\nexport function handleICEConnectionStateChangeEvent(event) {\n  log(\"*** ICE connection state changed to \" + myPeerConnection.iceConnectionState);\n\n  switch (myPeerConnection.iceConnectionState) {\n    case \"closed\":\n    case \"failed\":\n    case \"disconnected\":\n      closeVideoCall();\n      break;\n  }\n}\n\nexport function handleSignalingStateChangeEvent(event) {\n  log(\"*** WebRTC signaling state changed to: \" + myPeerConnection.signalingState);\n  if (myPeerConnection.signalingState === 'closed') {\n    closeVideoCall();\n  }\n}\n\nexport function handleICEGatheringStateChangeEvent(event) {\n  log(\"*** ICE gathering state changed to: \" + myPeerConnection.iceGatheringState);\n}\n\nexport function closeVideoCall() {\n  let remoteVideo = document.getElementById(\"received-video\");\n  let localVideo = document.getElementById(\"local-video\");\n\n  log(\"Closing the call\");\n\n  if (myPeerConnection) {\n    log(\"--> Closing the peer connection\");\n    myPeerConnection.onaddstream = null;\n    myPeerConnection.ontrack = null;\n    myPeerConnection.onremovestream = null;\n    myPeerConnection.onnicecandidate = null;\n    myPeerConnection.oniceconnectionstatechange = null;\n    myPeerConnection.onsignalingstatechange = null;\n    myPeerConnection.onicegatheringstatechange = null;\n    myPeerConnection.onnotificationneeded = null;\n\n    if (remoteVideo.srcObject) {\n      remoteVideo.srcObject.getTracks().forEach(track => track.stop());\n    }\n\n    if (localVideo.srcObject) {\n      localVideo.srcObject.getTracks().forEach(track => track.stop());\n    }\n\n    remoteVideo.src = null;\n    localVideo.src = null;\n\n    myPeerConnection.close();\n    myPeerConnection = null;\n  }\n}\n\nexport function handleHangUpMsg(msg) {\n  log(\"*** Received hang up notification from other peer\");\n  closeVideoCall();\n}\n\nexport function hangUpCall() {\n  closeVideoCall();\n}\n\nexport async function handleVideoOfferMsg(sdp) {\n\n  //if connection does not exist ask for camera access that is the default video stream\n  try {\n    if (!myPeerConnection) {\n      console.log(' handle video offer msg when connection existst');\n\n      createPeerConnection();\n      let desc = new RTCSessionDescription(sdp);\n      await myPeerConnection.setRemoteDescription(desc);\n      log(\"Setting up the local media stream...\");\n\n      let stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: { width: 612, height: 288 }\n      });\n      log(\"-- Local video stream obtained\");\n      document.getElementById(\"local-video\").srcObject = stream;\n\n      if (hasAddTrack) {\n        log(\"-- Adding tracks to the RTCPeerConnection\");\n        stream.getTracks().forEach(track =>\n          myPeerConnection.addTrack(track, stream)\n        );\n      } else {\n        log(\"-- Adding stream to the RTCPeerConnection\");\n        myPeerConnection.addStream(stream);\n      }\n    } else {\n      console.log('handle video offer message when connection exists')\n      let newDesc = new RTCSessionDescription(sdp);\n      await myPeerConnection.setRemoteDescription(newDesc);\n    }\n\n    log(\"------> Creating answer\");\n\n    let answer = await myPeerConnection.createAnswer();\n    await myPeerConnection.setLocalDescription(answer);\n    log(\"------> Setting local description after creating answer\");\n\n    socket.emit('video-answer', myPeerConnection.localDescription);\n    log(\"Sending answer packet back to other peer\");\n  } catch (err) {\n    console.log(err);\n    handleGetUserMediaError(err);\n  } finally {\n    myPeerConnection._negotiating = false;\n  }\n}\n\nexport function handleVideoAnswerMsg(sdp) {\n  log(\"Call recipient has accepted our call\");\n  var desc = new RTCSessionDescription(sdp);\n  myPeerConnection.setRemoteDescription(desc).catch(reportError);\n}\n\nexport function handleNewICECandidateMsg(candidate) {\n  var candidate = new RTCIceCandidate(candidate);\n  log(\"Adding received ICE candidate: \" + JSON.stringify(candidate));\n  myPeerConnection.addIceCandidate(candidate)\n    .catch(reportError);\n}\n\nexport function handleGetUserMediaError(e) {\n  log('HANDLE GET USER MEDIA ERROR FUNCTION');\n  switch (e.name) {\n    case \"NotFoundError\":\n      alert(\"Unable to open your call because no camera and/or microphone\" +\n        \"were found.\");\n      break;\n    case \"SecurityError\":\n    case \"PermissionDeniedError\":\n      // Do nothing; this is the same as the user canceling the call.\n      break;\n    default:\n      alert(\"Error opening your camera and/or microphone: \" + e.message);\n      break;\n  }\n  closeVideoCall();\n}\n\nexport function reportError(errMessage) {\n  log_error(\"Error \" + errMessage.name + \": \" + errMessage.message);\n}\n\n/* function handleReceiveDataChannel(event) {\n  console.log('DATA CHANNEL OPEN!');\n\n  let receiveChannel = event.channel;\n  receiveChannel.onopen = function () { console.log('receive channel on open') };\n  receiveChannel.onclose = function () { console.log('receive channel on close') };\n  receiveChannel.send('TU PUZZI!!!!!!!!!!!!!!');\n} */\n\n","import { myPeerConnection } from '../logic/webrtc';\n\nexport function selectFile() {\n  const fileInput = document.getElementById(\"file-input\");\n  fileInput.click();\n  console.log('buzzu', myPeerConnection);\n}\n\nexport function sendFileToPeer() {\n  let fileToSend = document.getElementById('file-input').files[0];\n  console.log('file to send', fileToSend);\n\n  //open data channel \n  createDataChannel();\n}\n\nfunction handleSendChannelOpen() {\n  console.log('data channel on open callback');\n}\n\nfunction handleSendChannelClose() {\n  console.log('data channel on close callback')\n}\n\nfunction createDataChannel() {\n  let dataChannel = myPeerConnection.createDataChannel('sendChannel');\n  dataChannel.onopen = handleSendChannelOpen;\n  dataChannel.onclose = handleSendChannelClose;\n}\n","import React, { Component } from 'react';\nimport { selectFile, sendFileToPeer } from '../logic/dataChannel';\nimport icon1 from '../assets/icons/001-conference.svg';\nimport icon2 from '../assets/icons/010-mail.svg';\nimport icon3 from '../assets/icons/013-videocall-1.svg';\nimport icon4 from '../assets/icons/024-megaphone.svg';\n\nimport '../styles/toolbar.css';\n\nclass Toolbar extends Component {\n\n  render() {\n    return (\n      <div id=\"toolbar\">\n\n        <input\n          type=\"file\"\n          id=\"file-input\"\n          onChange={sendFileToPeer}\n          style={{ display: 'none' }}>\n        </input>\n\n        <img className=\"icons\" src={icon1} alt=\"icon1\" onClick={selectFile} />\n        <img className=\"icons\" src={icon2} alt=\"icon2\" />\n        <img className=\"icons\" src={icon3} alt=\"icon3\" />\n        <img className=\"icons\" src={icon4} alt=\"icon4\" />\n      </div >\n    );\n  }\n}\n\nexport default Toolbar;\n\n","import React, { Component } from 'react';\nimport { askScreenStream, askCanvasStream } from '../logic/askStreams';\nimport { closeVideoCall } from '../logic/webrtc';\n\nimport shareScreenIcon from '../assets/icon2/share-screen.svg';\nimport blackboardIcon from '../assets/icon2/blackboard.svg';\nimport closeCallIcon from '../assets/icon2/close-call.svg';\nimport '../styles/callButtons.css';\n\nclass CallButtons extends Component {\n  render() {\n    return (\n      <div id=\"call-buttons\">\n\n        <div className=\"round-bg\" onClick={askScreenStream}>\n          <img className=\"call-buttons\" src={shareScreenIcon} alt=\"Share your screen icon\" />\n        </div>\n\n        <div className=\"round-bg\" onClick={askCanvasStream}>\n          <img className=\"call-buttons\" src={blackboardIcon} alt=\"Share notes on a blackboard icon\" />\n        </div>\n\n        <div className=\"round-bg\" onClick={closeVideoCall}>\n          <img className=\"call-buttons\" src={closeCallIcon} alt=\"Close current call icon\" />\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default CallButtons;\n\n","import React, { Component } from 'react';\nimport ReceivedVideo from './receivedVideo';\nimport LocalVideo from './localVideo';\nimport Canvas from './canvas';\nimport Toolbar from './toolbar';\nimport CallButtons from './callButtons';\nimport '../styles/videoContainer.css';\n\nclass VideoContainer extends Component {\n  render() {\n    return (\n      <div id=\"video-container\">\n        <ReceivedVideo />\n        <LocalVideo />\n        <Canvas />\n        <Toolbar />\n        <CallButtons />\n      </div>\n    );\n  }\n}\n\nexport default VideoContainer;\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Header from './components/header';\nimport VideoContainer from './components/videoContainer';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Header />\n        <VideoContainer />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  socket: state.socket\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  /* updateSocketInStore: (socket) => dispatch({\n    type: 'SOCKET',\n    socket: socket\n  }),\n  updateRoomNameInStore: (room) => dispatch({\n    type: 'ROOM',\n    room: room\n  }) */\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport socket from '../logic/socket';\nimport avatar from '../assets/avatar/man.svg';\nimport '../styles/joinRoom.css';\n\nclass JoinRoom extends Component {\n\n  readInputField = () => {\n    let input = document.getElementById('room-name');\n    let room = input.value;\n    socket.emit('join-room', room);\n  }\n\n  render() {\n    return (\n      <div id=\"join-room-wrapper\">\n        <div id=\"join-room-form\">\n          <img id=\"profile-photo\" src={avatar} alt=\"avatar\" />\n          <input id=\"room-name\" type=\"text\" placeholder=\"Which room do you wanna join?\" required></input>\n          <Link to=\"/videochat\">\n            <button id=\"join\" onClick={this.readInputField}>Join room</button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  socket: state.socket\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateSocketInStore: (socket) => dispatch({\n    type: 'SOCKET',\n    socket: socket\n  }),\n  updateRoomNameInStore: (room) => dispatch({\n    type: 'ROOM',\n    room: room\n  })\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(JoinRoom);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport App from '../App';\nimport JoinRoom from './joinRoom';\n\nconst Root = ({ store }) => (\n  <Provider store={store}>\n    <Router>\n      <div id=\"routes-wrapper\">\n        <Route exact path=\"/\" component={JoinRoom} />\n        <Route path=\"/videochat\" component={App} />\n      </div>\n    </Router>\n  </Provider>\n)\n\nRoot.propTypes = {\n  store: PropTypes.object.isRequired\n}\n\nexport default Root","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore } from 'redux'\nimport reducer from './reducers/reducer.js';\nimport Root from './components/Root';\n\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nconst store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ &&\n  window.__REDUX_DEVTOOLS_EXTENSION__());\n\nReactDOM.render(<Root store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/man.dabcdaa2.svg\";","module.exports = __webpack_public_path__ + \"static/media/001-conference.77761e56.svg\";","module.exports = __webpack_public_path__ + \"static/media/010-mail.68722792.svg\";","module.exports = __webpack_public_path__ + \"static/media/013-videocall-1.6b6feeaf.svg\";","module.exports = __webpack_public_path__ + \"static/media/024-megaphone.2a0a42f8.svg\";","module.exports = __webpack_public_path__ + \"static/media/share-screen.1219b614.svg\";","module.exports = __webpack_public_path__ + \"static/media/blackboard.781bd799.svg\";","module.exports = __webpack_public_path__ + \"static/media/close-call.973863ac.svg\";"],"sourceRoot":""}